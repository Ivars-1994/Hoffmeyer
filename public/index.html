<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    
    <!-- Critical Performance Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.clickcease.com">
    
    <!-- Preload critical font -->
    <link rel="preload" href="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiA.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Inline critical CSS for instant render -->
    <style>
      /* Critical above-the-fold styles */
      body { margin: 0; font-family: Inter, sans-serif; background: #fafafa; line-height: 1.5; }
      .glass-navbar { background: rgba(255,255,255,0.85); backdrop-filter: blur(10px); }
      .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      /* Prevent layout shift */
      img { max-width: 100%; height: auto; }
      /* Optimize font rendering */
      * { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    </style>
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung</title>
    <meta name="description" content="Kammerjäger Hoffmeyer - Schnelle & diskrete Schädlingsbekämpfung. 24/7 Notdienst. IHK-zertifiziert. Faire Preise. ✓ Wespen ✓ Bettwanzen ✓ Ungeziefer" />
    <meta name="keywords" content="Kammerjäger, Schädlingsbekämpfung, Ungeziefer, Wespen, Bettwanzen, Notdienst" />
    <meta name="author" content="Kammerjäger Hoffmeyer" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://kammerjaeger-hoffmeyer.de" />
    
    <!-- Open Graph -->
    <meta property="og:title" content="Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung" />
    <meta property="og:description" content="Schnelle & diskrete Schädlingsbekämpfung. 24/7 Notdienst verfügbar." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://kammerjaeger-hoffmeyer.de" />
    <meta property="og:image" content="/og-image.png" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung" />
    <meta name="twitter:description" content="Schnelle & diskrete Schädlingsbekämpfung. 24/7 Notdienst verfügbar." />

    <!-- Optimized font loading with display=swap -->
    <link rel="preload" href="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiA.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"></noscript>
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTVFNWPH"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Pre-render H1 for AdsBot (before React hydration) -->
    <h1 id="pre-render-h1" style="position:absolute;left:-9999px;top:0;">Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung</h1>
    <script>
      (function(){
        const path = window.location.pathname;
        const h1 = document.getElementById('pre-render-h1');
        const serviceMap = {
          '/svc/wespen': 'Wespen bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/bettwanzen': 'Bettwanzen bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/ratten': 'Ratten bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/maeuse': 'Mäuse bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/ameisen': 'Ameisen bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/silberfische': 'Silberfische bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/marder': 'Marder vertreiben - Kammerjäger Hoffmeyer',
          '/svc/floehe': 'Flöhe bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/schaben': 'Schaben bekämpfen - Kammerjäger Hoffmeyer'
        };
        if (serviceMap[path]) {
          h1.textContent = serviceMap[path];
        }
      })();
    </script>
    
    <div id="root"></div>
    
    <!-- Main application bundle -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Deferred non-critical scripts -->
    <script>
      // Load after page is interactive
      if ('requestIdleCallback' in window) {
        requestIdleCallback(function() {
          loadDeferredScripts();
        });
      } else {
        setTimeout(loadDeferredScripts, 2000);
      }
      
      function loadDeferredScripts() {
        // Google Tag Manager
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KTVFNWPH');
        
        // ClickCease
        var script = document.createElement('script');
        script.async = true;
        script.type = 'text/javascript';
        script.src = 'https://www.clickcease.com/monitor/stat.js';
        document.head.appendChild(script);
        
        // Google Ads
        var gtagScript = document.createElement('script');
        gtagScript.async = true;
        gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=AW-16458367327';
        document.head.appendChild(gtagScript);
        
        gtagScript.onload = function() {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'AW-16458367327');
          
          window.gtag_report_conversion = function(url) {
            var callback = function () {
              if (typeof(url) != 'undefined') {
                window.location = url;
              }
            };
            gtag('event', 'conversion', {
              'send_to': 'AW-16458367327/uNzYCJ34_O8ZEOq8hpo9',
              'event_callback': callback
            });
            return false;
          };
        };
        
        // GPT Engineer script
        var gptScript = document.createElement('script');
        gptScript.type = 'module';
        gptScript.src = 'https://cdn.gpteng.co/gptengineer.js';
        document.head.appendChild(gptScript);
      }
    </script>
    
    <!-- Smart Location Detection Script -->
    <script>
    (function() {
      function qp(name){
        const v = new URLSearchParams(location.search).get(name);
        return v ? v.trim() : "";
      }
      function cleanCity(raw){
        if(!raw) return "";
        const v = raw.replace(/[^a-zA-ZäöüÄÖÜß \-]/g,"").substring(0,40).replace(/\s+/g," ").trim();
        return v;
      }
      function cleanKw(raw){
        if(!raw) return "";
        const v = raw.replace(/[<>"]/g,"").substring(0,80).trim();
        return v;
      }
      function titleCase(s){
        return s.replace(/\w\S*/g, t => t.charAt(0).toUpperCase()+t.slice(1));
      }

      const cityParam = cleanCity(qp("city"));
      const kwParam   = cleanKw(qp("kw"));

      const serviceMap = [
        {pat:/wesp/i,        label:"Wespennest entfernen"},
        {pat:/bettwan/i,     label:"Bettwanzen bekämpfen"},
        {pat:/ratten/i,      label:"Ratten bekämpfen"},
        {pat:/m(ä|ae)use/i,  label:"Mäuse bekämpfen"},
        {pat:/ameis/i,       label:"Ameisen bekämpfen"},
        {pat:/silberfisch/i, label:"Silberfische bekämpfen"},
        {pat:/marder/i,      label:"Marder vertreiben"},
        {pat:/floeh|flöhe/i, label:"Flöhe bekämpfen"},
        {pat:/schaben|kaker/i,label:"Schaben bekämpfen"}
      ];
      function inferService(kw){
        if(!kw) return "";
        for(const m of serviceMap){ if(m.pat.test(kw)) return m.label; }
        return "";
      }
      const service = inferService(kwParam);

      document.addEventListener("DOMContentLoaded", function(){
        if (cityParam || kwParam) {
          if (cityParam) {
            sessionStorage.setItem("cityName", titleCase(cityParam));
            sessionStorage.setItem("cityData", JSON.stringify({
              name: titleCase(cityParam),
              plz: "00000"
            }));
          }
          
          if (service) {
            sessionStorage.setItem("detectedService", service);
          }
          if (kwParam) {
            sessionStorage.setItem("detectedKeyword", kwParam);
          }
          
          window.dispatchEvent(new CustomEvent('cityDetected', { 
            detail: { 
              name: titleCase(cityParam), 
              plz: "00000",
              service: service,
              keyword: kwParam
            } 
          }));
        }

        const leadCity = document.getElementById("lead-city");
        const leadKw   = document.getElementById("lead-keyword");
        if (leadCity && cityParam) leadCity.value = cityParam;
        if (leadKw   && kwParam)   leadKw.value   = kwParam;

        if (window.gtag) {
          gtag('event', 'lp_localize', { city: cityParam || '(none)', kw: kwParam || '(none)' });
        }
      });
    })();
    </script>
    
  </body>
</html>
