<!doctype html>
<html lang="de">
  <head>
    <!-- Google Tag Manager -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KTVFNWPH');
    </script>
    <!-- End Google Tag Manager -->

    <!--  ClickCease.com tracking-->
    <script type='text/javascript'>var script = document.createElement('script');
    script.async = true; script.type = 'text/javascript';
    var target = 'https://www.clickcease.com/monitor/stat.js';
    script.src = target;var elem = document.head;elem.appendChild(script);
    </script>
    <noscript>
    <a href='https://www.clickcease.com' rel='nofollow'><img src='https://monitor.clickcease.com' alt='ClickCease'/></a>
    </noscript>
    <!--  ClickCease.com tracking-->

    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung</title>
    <meta name="description" content="Kammerjäger Hoffmeyer - Schnelle & diskrete Schädlingsbekämpfung. 24/7 Notdienst. IHK-zertifiziert. Faire Preise. ✓ Wespen ✓ Bettwanzen ✓ Ungeziefer" />
    <meta name="keywords" content="Kammerjäger, Schädlingsbekämpfung, Ungeziefer, Wespen, Bettwanzen, Notdienst" />
    <meta name="author" content="Kammerjäger Hoffmeyer" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://kammerjaeger-hoffmeyer.de" />
    
    <!-- Open Graph -->
    <meta property="og:title" content="Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung" />
    <meta property="og:description" content="Schnelle & diskrete Schädlingsbekämpfung. 24/7 Notdienst verfügbar." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://kammerjaeger-hoffmeyer.de" />
    <meta property="og:image" content="/og-image.png" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung" />
    <meta name="twitter:description" content="Schnelle & diskrete Schädlingsbekämpfung. 24/7 Notdienst verfügbar." />

    <!-- Google Ads -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-16458367327"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'AW-16458367327');
    </script>

    <!-- Conversion tracking function -->
    <script>
      function gtag_report_conversion(url) {
        var callback = function () {
          if (typeof(url) != 'undefined') {
            window.location = url;
          }
        };
        gtag('event', 'conversion', {
          'send_to': 'AW-16458367327/uNzYCJ34_O8ZEOq8hpo9',
          'event_callback': callback
        });
        return false;
      }
    </script>

    <!-- Fingerprint2 - Temporarily disabled due to loading issues -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
    <script>
      FingerprintJS.load()
        .then(fp => fp.get())
        .then(result => {
          const visitorId = result.visitorId;
          if (typeof gtag !== 'undefined') {
            gtag('config', 'AW-16458367327', {
              'custom_map': {'dimension1': 'fp_visitor_id'}
            });
            gtag('event', 'page_view', {
              'fp_visitor_id': visitorId
            });
          }
        })
        .catch(error => {
          console.error("Error getting Fingerprint visitor ID:", error);
        });
    </script>
    -->
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTVFNWPH"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Pre-render H1 for AdsBot (before React hydration) -->
    <h1 id="pre-render-h1" style="position:absolute;left:-9999px;top:0;">Kammerjäger Hoffmeyer - Professionelle Schädlingsbekämpfung</h1>
    <script>
      (function(){
        const path = window.location.pathname;
        const h1 = document.getElementById('pre-render-h1');
        const serviceMap = {
          '/svc/wespen': 'Wespen bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/bettwanzen': 'Bettwanzen bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/ratten': 'Ratten bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/maeuse': 'Mäuse bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/ameisen': 'Ameisen bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/silberfische': 'Silberfische bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/marder': 'Marder vertreiben - Kammerjäger Hoffmeyer',
          '/svc/floehe': 'Flöhe bekämpfen - Kammerjäger Hoffmeyer',
          '/svc/schaben': 'Schaben bekämpfen - Kammerjäger Hoffmeyer'
        };
        if (serviceMap[path]) {
          h1.textContent = serviceMap[path];
        }
        // React will replace this with visible H1 after hydration
      })();
    </script>
    
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Smart Location Detection Script -->
    <script>
    (function() {
      // ---- Helper ----
      function qp(name){
        const v = new URLSearchParams(location.search).get(name);
        return v ? v.trim() : "";
      }
      function cleanCity(raw){
        // Erlaubt Buchstaben/Leerzeichen/Bindestrich/Umlaute/ß, max. 40 Zeichen
        if(!raw) return "";
        const v = raw.replace(/[^a-zA-ZäöüÄÖÜß \-]/g,"").substring(0,40).replace(/\s+/g," ").trim();
        return v;
      }
      function cleanKw(raw){
        if(!raw) return "";
        // Entfernt nur kritische Zeichen; lässt Wörter stehen
        const v = raw.replace(/[<>"]/g,"").substring(0,80).trim();
        return v;
      }
      function titleCase(s){
        return s.replace(/\w\S*/g, t => t.charAt(0).toUpperCase()+t.slice(1));
      }

      // ---- Read params ----
      const cityParam = cleanCity(qp("city"));
      const kwParam   = cleanKw(qp("kw"));

      // ---- Build texts ----
      // Service aus Keyword ableiten (sehr simple Heuristik)
      // Optional: mappe bekannte Services sauber aus
      const serviceMap = [
        {pat:/wesp/i,        label:"Wespennest entfernen"},
        {pat:/bettwan/i,     label:"Bettwanzen bekämpfen"},
        {pat:/ratten/i,      label:"Ratten bekämpfen"},
        {pat:/m(ä|ae)use/i,  label:"Mäuse bekämpfen"},
        {pat:/ameis/i,       label:"Ameisen bekämpfen"},
        {pat:/silberfisch/i, label:"Silberfische bekämpfen"},
        {pat:/marder/i,      label:"Marder vertreiben"},
        {pat:/floeh|flöhe/i, label:"Flöhe bekämpfen"},
        {pat:/schaben|kaker/i,label:"Schaben bekämpfen"}
      ];
      function inferService(kw){
        if(!kw) return "";
        for(const m of serviceMap){ if(m.pat.test(kw)) return m.label; }
        return ""; // generisch lassen, wenn nix matcht
      }
      const service = inferService(kwParam);

      // ---- Apply to DOM ----
      document.addEventListener("DOMContentLoaded", function(){
        // Integration mit unserem React-System über sessionStorage
        if (cityParam || kwParam) {
          // City in sessionStorage setzen für React-Komponenten
          if (cityParam) {
            sessionStorage.setItem("cityName", titleCase(cityParam));
            sessionStorage.setItem("cityData", JSON.stringify({
              name: titleCase(cityParam),
              plz: "00000"
            }));
          }
          
          // Service-Info auch speichern
          if (service) {
            sessionStorage.setItem("detectedService", service);
          }
          if (kwParam) {
            sessionStorage.setItem("detectedKeyword", kwParam);
          }
          
          // Custom Event für React triggern
          window.dispatchEvent(new CustomEvent('cityDetected', { 
            detail: { 
              name: titleCase(cityParam), 
              plz: "00000",
              service: service,
              keyword: kwParam
            } 
          }));
        }

        // Hidden fields für CRM/Analytics
        const leadCity = document.getElementById("lead-city");
        const leadKw   = document.getElementById("lead-keyword");
        if (leadCity && cityParam) leadCity.value = cityParam;
        if (leadKw   && kwParam)   leadKw.value   = kwParam;

        // Optional: GA4 Event (falls gtag vorhanden)
        if (window.gtag) {
          gtag('event', 'lp_localize', { city: cityParam || '(none)', kw: kwParam || '(none)' });
        }
      });
    })();
    </script>
    
  </body>
</html>